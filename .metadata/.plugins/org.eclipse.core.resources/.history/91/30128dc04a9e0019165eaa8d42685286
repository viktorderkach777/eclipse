package coffeMashine;

import java.util.Scanner;

public class coffeMashine {

	public static void main(String[] args) {
		
		ProtoMashine proto = new ProtoMashine(1, 100, 2, 100, 3, 100, 1, 100, 0);
		proto.MashinePrint();
		Human human = new Human("Petro", 400);
		human.print();
		Order order = proto.OrderSum();
		
		if( human.Payment(order)) {
			proto.GetOrder(order);
			proto.MakePayment(order);			
		}
		else {
			System.out.println("Недостатньо коштів для замовлення!");
		}
		human.print();
		proto.MashinePrint();
		
	}
	
	
	public static double GetIngredient(String condition, double min, double max ) {
    	double n=0;
    	int checknumber = -1;
    	Scanner in=new Scanner(System.in);
    	do {
		try {
			System.out.println(condition);
			String str=in.next();
			n=Double.parseDouble(str);		
			
			checknumber = 1;
		}
		catch(NumberFormatException ex)
		{
			System.out.println("Помилка перетворення строки в число");
			checknumber = -1;
		}
		catch(Exception ex) {
			System.out.printf("error input = %s\n",ex.getMessage());
			checknumber = -1;
		}
		if(n <min || n>max) {
			checknumber = -1;
		}
    	}while(checknumber == -1);
    return n;
    }
	
	public static int GetNumber() {
    	int n=0;
    	int checknumber = -1;
    	Scanner in=new Scanner(System.in);
    	do {
		try {
			System.out.println("Введіть число: ");
			String str=in.next();
			n=Integer.parseInt(str); 
			checknumber = 1;
		}
		catch(NumberFormatException ex)
		{
			System.out.println("Помилка перетворення строки в число");
			checknumber = -1;
		}
		catch(Exception ex) {
			System.out.printf("error input = %s\n",ex.getMessage());
			checknumber = -1;
		}
    	}while(checknumber == -1);
    return n;
    }
	
	public static int WhichDrink() {
    	int n=0;
    	Scanner in=new Scanner(System.in);
    	
    	do {
    		try {
    			System.out.println("Виберіть напій: ");
    			System.out.println("1 - кава ");
    			System.out.println("2 - капучино ");
    			System.out.println("3 - американо ");
    			System.out.println("4 - еспресссо ");
    			String str=in.next();        			
    			
    			n=Integer.parseInt(str);
    		}
    		catch(NumberFormatException ex)
    		{
    			System.out.println("Помилка перетворення строки в число");
    		}
    		catch(Exception ex) {
    			System.out.printf("error input = %s\n",ex.getMessage());
    		}
		}while(n <1 || n>4);
		
    return n;
}
	
	}
	



class ProtoMashine{	
	static double minAmountCofee = 0;
	static double maxAmountCofee = 10;
	static double minAmountSugar = 0;
	static double maxAmountSugar = 20;
	static double minAmountMilk = 0;
	static double maxAmountMilk = 30;
	static double minAmountCognac = 0;
	static double maxAmountCognac = 20;	
	static double maxClientSum = 500;
	static double minSum = 2;
	
	double sugarPrice;
	double sugarAmount;
	double cofeePrice;
	double cofeeAmount;
	double cognacPrice;
	double cognacAmount;	
	double milkPrice;
	double milkAmount;	
	double allMoney;	
	
	public ProtoMashine(double sugarPrice, double sugarAmount, double cofeePrice, double cofeeAmount,
			double cognacPrice, double cognacAmount,  double milkPrice,
			double milkAmount, double allMoney) {
		
		this.sugarPrice = sugarPrice;
		this.sugarAmount = sugarAmount;
		this.cofeePrice = cofeePrice;
		this.cofeeAmount = cofeeAmount;
		this.cognacPrice = cognacPrice;
		this.cognacAmount = cognacAmount;		
		this.milkPrice = milkPrice;
		this.milkAmount = milkAmount;		
		this.allMoney = allMoney;	
		
	}
	
	public  int GetMoney() {
    	int n=0;
    	int checknumber = -1;
    	Scanner in=new Scanner(System.in);
    	do {
		try {
			System.out.println("Введіть число: ");
			String str=in.next();
			n=Integer.parseInt(str); 
			checknumber = 1;
		}
		catch(NumberFormatException ex)
		{
			System.out.println("Помилка перетворення строки в число");
			checknumber = -1;
		}
		catch(Exception ex) {
			System.out.printf("error input = %s\n",ex.getMessage());
			checknumber = -1;
		}
    	}while(checknumber == -1);
    return n;
    }
	
	
	public Order OrderSum() {
		double coffeeAmount =  GetIngredient("Введіть кількість кави (" + minAmountCofee +" - " + maxAmountCofee + " гр)", minAmountCofee , maxAmountCofee);
		double milkAmount =  GetIngredient("Введіть кількість молока (" + minAmountMilk + " - " + maxAmountMilk + " гр)", minAmountMilk , maxAmountMilk);
		double sugarAmount =  GetIngredient("Введіть кількість цукру (" + minAmountSugar + " - " + maxAmountSugar + " гр)", minAmountSugar , maxAmountSugar);
		double cognacAmount =  GetIngredient("Введіть кількість коньяку (" + minAmountCognac + " - " + maxAmountCognac + " гр)", minAmountCognac , maxAmountCognac);
		double sum = minSum + coffeeAmount * this.cofeePrice + milkAmount * this.milkPrice + 
				+ sugarAmount * this.sugarPrice + cognacAmount * this.cognacPrice;
		
		System.out.println("Ціна замовлення: " + sum);	
		
		Order order = new Order(sum, coffeeAmount, sugarAmount, milkAmount, cognacAmount);
		return order;
				
	}
	
	public double GetOrder(Order order) {
		double clientSum = GetIngredient("Введіть гроші (" + order.getSum() +  " - " + maxClientSum +"грв)", order.getSum() , maxClientSum);		
		double clientChange = clientSum - order.getSum();
		System.out.println("Ваша здача: " + clientChange);
		return order.getSum();
	}
	
	public boolean MakePayment(Order order) {
		if(this.sugarAmount >= order.getSugarAmount()) {
			this.sugarAmount -= order.getSugarAmount();		
		}
		else {
			System.out.println("Замовлення не виконано: в машині недостатньо цукру!");
			return false;
		}
		
		if(this.cofeeAmount >= order.getCofeeAmount()) {
			this.cofeeAmount -= order.getCofeeAmount();		
		}
		else {
			System.out.println("Замовлення не виконано: в машині недостатньо кави!");
			return false;
		}
		
		if(this.cognacAmount >= order.getCognacAmount()) {
			this.cognacAmount -= order.getCognacAmount();		
		}
		else {
			System.out.println("Замовлення не виконано: в машині недостатньо коньяку!");
			return false;
		}
		
		if(this.milkAmount >= order.getMilkAmount()) {
			this.milkAmount -= order.getMilkAmount();			
		}
		else {
			System.out.println("Замовлення не виконано: в машині недостатньо молока!");
			return false;
		}			
			
		this.allMoney += order.getSum();
		System.out.println("Дякуємо за замовлення!");
		
		return true;
	}
	
	public void MashinePrint() {
		System.out.println("----------------------Статистика кавомашини------------------------ ");
		System.out.printf("Кількість цукру (гр) : %.2f\n",this.sugarAmount);
		System.out.printf("Кількість кави (гр) : %.2f\n",this.cofeeAmount);	
		System.out.printf("Кількість коньяку (гр) : %.2f\n",this.cognacAmount);	
		System.out.printf("Кількість молока (гр) : %.2f\n",this.milkAmount);	
		System.out.printf("Гроші (грв) : %.2f\n",this.allMoney);
		System.out.println("-------------------------------------------------------------------- \n");
	}
	
	
	public double GetIngredient(String condition, double min, double max ) {
    	double n=0;
    	int checknumber = -1;
    	Scanner in=new Scanner(System.in);
    	do {
		try {
			System.out.println(condition);
			String str=in.next();
			n=Double.parseDouble(str);		
			
			checknumber = 1;
		}
		catch(NumberFormatException ex)
		{
			System.out.println("Помилка перетворення строки в число");
			checknumber = -1;
		}
		catch(Exception ex) {
			System.out.printf("error input = %s\n",ex.getMessage());
			checknumber = -1;
		}
		if(n <min || n>max) {
			checknumber = -1;
		}
    	}while(checknumber == -1);
    return n;
    }
}

class Order{
	double sum;	
	double sugarAmount;	
	double cofeeAmount;	
	double cognacAmount;	
	double milkAmount;
	
	public Order(double sum, double cofeeAmount, double sugarAmount,
			   double milkAmount, double cognacAmount) {
		
		this.sum = sum;		
		this.sugarAmount = sugarAmount;		
		this.cofeeAmount = cofeeAmount;	
		this.cognacAmount = cognacAmount;		
		this.milkAmount = milkAmount;
	}
	
	public double getSum() {
		return sum;
	}

	public void setSum(double sum) {
		this.sum = sum;
	}

	public double getSugarAmount() {
		return sugarAmount;
	}

	public void setSugarAmount(double sugarAmount) {
		this.sugarAmount = sugarAmount;
	}

	public double getCofeeAmount() {
		return cofeeAmount;
	}

	public void setCofeeAmount(double cofeeAmount) {
		this.cofeeAmount = cofeeAmount;
	}

	public double getCognacAmount() {
		return cognacAmount;
	}

	public void setCognacAmount(double cognacAmount) {
		this.cognacAmount = cognacAmount;
	}

	public double getMilkAmount() {
		return milkAmount;
	}

	public void setMilkAmount(double milkAmount) {
		this.milkAmount = milkAmount;
	}
	
}

class Human{	

	String name;		
	double money;
	
	public Human(String name, double money) {
		super();
		this.name = name;
		this.money = money;
	}
	
	public boolean Payment(Order order) {
		double startMoney = this.money;		
		double finishMoney = this.money - order.getSum();
		 
		if(finishMoney < 0) {
			return false; 
		}
		
		this.money = finishMoney;
		return true; 
	}
	
	public double getMoney() {
		return money;
	}

	public void setMoney(double money) {
		this.money = money;
	}
	
	public void print() {
		System.out.println("-----------------------Дані клієнта---------------------------------- ");
		System.out.println("Клієнт: " + this.name + "; Гроші: " + this.money);
		System.out.println("-------------------------------------------------------------------- \n");
	}
}
